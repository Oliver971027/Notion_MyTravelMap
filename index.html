<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Travel Map</title>
    <style>
        body { margin: 0; background-color: #ffffff; overflow: hidden; font-family: sans-serif; }
        
        #map-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        svg { width: 100%; height: 100%; max-width: 1200px; }
        
        path {
            fill: #e0e0e0;
            stroke: #ffffff;
            stroke-width: 0.5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        path[data-active="true"] { fill: #7d97ad; }

        path:hover {
            fill: #ff6b6b !important;
            filter: drop-shadow(0px 2px 4px rgba(0,0,0,0.2));
            transform: translateY(-2px); /* 注意：有些複雜 SVG 用 transform 可能會跑位，視情況移除 */
        }

        #tooltip {
            position: absolute; display: none; background: rgba(0, 0, 0, 0.8);
            color: white; padding: 6px 10px; border-radius: 4px; font-size: 14px;
            pointer-events: none; white-space: nowrap; z-index: 10;
        }
    </style>
</head>
<body>

    <div id="tooltip"></div>
    
    <div id="map-container"></div>

    <script>
        const travelData = {
            "SG": { name: "新加坡", link: "https://www.notion.so/12-27-01-02-29309e538da9810d8805d82605a212df?source=copy_link" },
			"MY": { name: "馬來西亞", link: "https://www.notion.so/12-23-12-27-29309e538da980e88cd3c3ad8523382a?source=copy_link" }
        };

        const container = document.getElementById('map-container');
        const tooltip = document.getElementById('tooltip');

        async function initMap() {
            try {
                const response = await fetch('./world.svg'); 
                if (!response.ok) throw new Error('無法載入地圖');
                
                const svgText = await response.text();
                container.innerHTML = svgText;

                bindInteractions();

            } catch (error) {
                console.error('Error loading SVG:', error);
                container.innerHTML = '<p>地圖載入失敗，請確認是否使用 Server 開啟。</p>';
            }
        }

        function bindInteractions() {
            const paths = container.querySelectorAll('path');

            paths.forEach(path => {
                const countryId = path.getAttribute('id');
                
                if(!countryId) return; 

                const data = travelData[countryId];

                if (data) {
                    path.setAttribute('data-active', 'true');
                }

                path.addEventListener('mouseenter', () => {
                    tooltip.style.display = 'block';
                    tooltip.innerText = data ? data.name : countryId;
                });

                path.addEventListener('mousemove', (e) => {
                    tooltip.style.left = (e.pageX + 15) + 'px';
                    tooltip.style.top = (e.pageY + 15) + 'px';
                });

                path.addEventListener('mouseleave', () => {
                    tooltip.style.display = 'none';
                });

                path.addEventListener('click', () => {
                    if (data && data.link) {
                        window.open(data.link, '_blank');
                    }
                });
            });
        }
        initMap();
    </script>
</body>
</html>